// Copyright 2022 The Jule Programming Language.
// Use of this source code is governed by a BSD 3-Clause
// license that can be found in the LICENSE file.

use cpp "heap.hpp"

type[T]
cpp __julec_is_guaranteed(*T) bool

type[T]
cpp __julec_can_guarantee(*T) bool

//doc:
// Reports pointer is heap-guaranteed or not.
//
// - Returns false if pointer is nil.
@inline
type[T]
pub is_guaranteed(ptr: *T) bool {
    if ptr == nil {
        ret false
    }
    ret cpp.__julec_is_guaranteed[T](ptr)
}

//doc:
// Reports pointer is can heap-guarantee.
//
// - Returns false if pointer is nil.
// - Returns false if pointer is already heap-guaranteed.
@inline
type[T]
pub can_guarantee(ptr: *T) bool {
    ret cpp.__julec_can_guarantee[T](ptr)
}
