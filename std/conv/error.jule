// Copyright 2022 The Jule Programming Language.
// Use of this source code is governed by a BSD 3-Clause
// license that can be found in the LICENSE file.

use std::errors

//doc: Indicates that a value does not have the right syntax for the target type.
pub ErrorSyntax: = std::errors::new("invalid syntax")

//doc: Records a failed conversion.
pub struct ConvError {
	Func : str    // the failing function
	Input: str    // the input
	Error: Error  // the reason the conversion failed
}

impl Error for ConvError {
	@inline
	&error() str {
		ret "std::conv::" + .Func + ": " + "parsing " + .Input + ": " + .Error.error()
	}
}

impl ConvError {
	@inline
	pub &unwrap() Error {
		ret .Error
	}
}

syntax_error(fn: str, input: str) ConvError {
	ret ConvError{
		Func: fn,
		Input: input,
		Error: ErrorSyntax,
	}
}
